(function(t){function n(n){for(var o,a,c=n[0],r=n[1],l=n[2],d=0,m=[];d<c.length;d++)a=c[d],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&m.push(s[a][0]),s[a]=0;for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);u&&u(n);while(m.length)m.shift()();return i.push.apply(i,l||[]),e()}function e(){for(var t,n=0;n<i.length;n++){for(var e=i[n],o=!0,c=1;c<e.length;c++){var r=e[c];0!==s[r]&&(o=!1)}o&&(i.splice(n--,1),t=a(a.s=e[0]))}return t}var o={},s={app:0},i=[];function a(n){if(o[n])return o[n].exports;var e=o[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,a),e.l=!0,e.exports}a.m=t,a.c=o,a.d=function(t,n,e){a.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,n){if(1&n&&(t=a(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(a.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)a.d(e,o,function(n){return t[n]}.bind(null,o));return e},a.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(n,"a",n),n},a.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},a.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=n,c=c.slice();for(var l=0;l<c.length;l++)n(c[l]);var u=r;i.push([0,"chunk-vendors"]),e()})({0:function(t,n,e){t.exports=e("56d7")},"340f":function(t,n,e){},"56d7":function(t,n,e){"use strict";e.r(n);e("e260"),e("e6cf"),e("cca6"),e("a79d"),e("f9e3");var o=e("2b0e"),s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e(t.layuot,{tag:"component"},[e("router-view")],1)},i=[],a=(e("d3b7"),function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("Header"),e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("Sidebar"),t._t("default")],2)])],1)}),c=[],r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("nav",{staticClass:"navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0"},[e("a",{staticClass:"navbar-brand col-sm-3 col-md-2 mr-0",attrs:{href:"#"}},[t._v("Социальная сеть")]),e("ul",{staticClass:"navbar-nav px-3"},[e("li",{staticClass:"nav-item text-nowrap"},[e("a",{staticClass:"nav-link",on:{click:function(n){return t.onLogoutClick()}}},[t._v("Выйти")])])])])},l=[],u=e("8c4f"),d=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("main",{staticClass:"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4",attrs:{role:"main"}},[t._m(0),e("form",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4 mb-3"},[e("label",{attrs:{for:"firstName"}},[t._v("Имя")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.firstname,expression:"firstname"}],staticClass:"form-control",attrs:{type:"text",id:"firstName",placeholder:"",value:""},domProps:{value:t.firstname},on:{input:function(n){n.target.composing||(t.firstname=n.target.value)}}})]),e("div",{staticClass:"col-md-4 mb-3"},[e("label",{attrs:{for:"lastName"}},[t._v("Фамилия")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.surname,expression:"surname"}],staticClass:"form-control",attrs:{type:"text",id:"lastName",placeholder:"",value:""},domProps:{value:t.surname},on:{input:function(n){n.target.composing||(t.surname=n.target.value)}}})]),e("div",{staticClass:"col-md-4 mb-3"},[e("br"),e("button",{staticClass:"btn btn-primary btn-lg btn-block",attrs:{type:"button"},on:{click:function(n){return t.onSearchClick()}}},[t._v("Поиск")])])])]),e("hr"),t._l(t.userList,(function(n,o){return e("account-row",{key:n.id,attrs:{item:n,index:o,"account-id":n.id,name:n.name,surname:n.surname},on:{viewAccountInfo:function(n){return t.onViewAccountInfo(n)}}})}))],2)},m=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},[e("h1",{staticClass:"h2"},[t._v("Пользователи")])])}],f=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"shadow-sm p-3 mb-5 bg-white rounded"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-2 mb-3"},[t._v(" "+t._s(t.name)+" "+t._s(t.surname)+" ")]),e("div",{staticClass:"col-md-1 mb-3"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(n){return t.onViewClick()}}},[t._v("Подробнее")])])])])},p=[],h={name:"UserRow",props:["accountId","name","surname"],methods:{onViewClick:function(){this.$emit("viewAccountInfo",this.accountId)}}},g=h,v=e("2877"),C=Object(v["a"])(g,f,p,!1,null,null,null),b=C.exports,_=e("2f62"),w=e("bc3a"),y=e.n(w),k={authAccountId:"",jwtToken:""},A={getJwtToken:function(t){return t.jwtToken},getAuthAccountId:function(t){return t.authAccountId}},E={setJwtToken:function(t,n){t.jwtToken=n},setAuthAccountId:function(t,n){t.authAccountId=n}},I={REFRESH_TOKEN:function(t,n){return new Promise((function(e,o){var s="/api/authenticate/refresh";y.a.get(s,{headers:{Authorization:"Bearer "+n}}).then((function(n){t.commit("setJwtToken",n.data.jwtToken),t.commit("setAuthAccountId",n.data.accountId),e({success:!0})})).catch((function(t){console.log(t),o({errorMessage:t})}))}))},AUTH:function(t,n){return new Promise((function(e,o){y.a.post("/api/authenticate",n).then((function(n){console.log(n),t.commit("setJwtToken",n.data.jwtToken),t.commit("setAuthAccountId",n.data.accountId),e({success:!0})})).catch((function(t){console.log("auth ERROR "+t),o({errorMessage:t})}))}))}},T={state:k,getters:A,mutations:E,actions:I},F={layout:""},N={getLayout:function(t){return t.layout}},B={setLayout:function(t,n){t.layout=n}},x={},R={state:F,getters:N,mutations:B,actions:x},S={accounts:null},P={getAccounts:function(t){return t.accounts}},O={setAccounts:function(t,n){t.accounts=n}},D={ACCOUNT_REGISTER:function(t,n){return console.log("ACCOUNT_REGISTER invoke "+n),new Promise((function(e,o){var s="/api/account/register";y()({method:"post",url:s,data:JSON.stringify(n),headers:{"Content-Type":"application/json"},async:!1}).then((function(n){console.log(n),localStorage.jwtToken=n.data.jwtToken,t.commit("setJwtToken",n.data.jwtToken),t.commit("setAuthAccountId",n.data.id),e({success:!0})})).catch((function(t){console.log(t),o({errorMessage:t})}))}))},GET_ALL_ACCOUNTS:function(t,n){return new Promise((function(e,o){var s="/api/account/all";y.a.get(s,{headers:{Authorization:"Bearer "+n}}).then((function(n){console.log(n),t.commit("setAccounts",n.data),e({success:!0})})).catch((function(t){console.log(t),o({errorMessage:t})}))}))},SEARCH_ACCOUNTS:function(t,n){return new Promise((function(e,o){var s="/api/account/search?";""!==n.firstname&&(s+="firstName="+n.firstname+"&"),""!==n.surname&&(s+="lastName="+n.surname),y.a.get(s,{headers:{Authorization:"Bearer "+localStorage.jwtToken}}).then((function(n){console.log(n),t.commit("setAccounts",n.data),e({success:!0})})).catch((function(t){console.log(t),o({errorMessage:t})}))}))},GET_ACCOUNT:function(t,n){return new Promise((function(e,o){var s="/api/account/info/"+n;y.a.get(s,{headers:{Authorization:"Bearer "+localStorage.jwtToken}}).then((function(n){console.log(n),t.commit("setAccounts",n.data),e({success:!0})})).catch((function(t){console.log(t),o({errorMessage:t})}))}))},GET_CURRENT_ACCOUNT:function(t){return new Promise((function(n,e){var o="/api/account/current";y.a.get(o,{headers:{Authorization:"Bearer "+localStorage.jwtToken}}).then((function(e){console.log(e),t.commit("setAccounts",e.data),n({success:!0})})).catch((function(t){console.log(t),e({errorMessage:t})}))}))}},$={state:S,getters:P,mutations:O,actions:D},j={friends:null},L={getFriends:function(t){return t.friends}},V={setFriends:function(t,n){t.friends=n}},G={GET_FRIENDS:function(t,n){return new Promise((function(e,o){var s="/api/friends";y.a.get(s,{headers:{Authorization:"Bearer "+n}}).then((function(n){console.log(n),t.commit("setFriends",n.data),e({success:!0})})).catch((function(t){console.log(t),o({errorMessage:t})}))}))},GET_INCOMING_FRIEND_REQUESTS:function(t,n){return new Promise((function(e,o){var s="/api/friends/incoming";y.a.get(s,{headers:{Authorization:"Bearer "+n}}).then((function(n){console.log(n),t.commit("setFriends",n.data),e({success:!0})})).catch((function(t){console.log(t),o({errorMessage:t})}))}))},GET_OUTGOING_FRIEND_REQUESTS:function(t,n){return new Promise((function(e,o){var s="/api/friends/outgoing";y.a.get(s,{headers:{Authorization:"Bearer "+n}}).then((function(n){console.log(n),t.commit("setFriends",n.data),e({success:!0})})).catch((function(t){console.log(t),o({errorMessage:t})}))}))},ADD_FRIEND:function(t,n){return console.log("ADD_FRIEND invoke "+n),new Promise((function(t,e){var o="/api/friend/add";y()({method:"post",url:o,data:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.jwtToken},async:!1}).then((function(n){console.log(n),t({response:n})})).catch((function(t){console.log(t),e({errorMessage:t})}))}))},CONFIRM_FRIEND:function(t,n){return console.log("CONFIRM_FRIEND invoke "+n),new Promise((function(t,e){var o="/api/friend/confirm";y()({method:"post",url:o,data:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.jwtToken},async:!1}).then((function(n){console.log(n),t({response:n})})).catch((function(t){console.log(t),e({errorMessage:t})}))}))},DELETE_FRIEND:function(t,n){return console.log("DELETE_FRIEND invoke "+n),new Promise((function(t,e){var o="/api/friend/delete";y()({method:"post",url:o,data:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.jwtToken},async:!1}).then((function(n){console.log(n),t({response:n})})).catch((function(t){console.log(t),e({errorMessage:t})}))}))},CANCEL_FRIEND:function(t,n){return console.log("CANCEL_FRIEND invoke "+n),new Promise((function(t,e){var o="/api/friend/cancel";y()({method:"post",url:o,data:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.jwtToken},async:!1}).then((function(n){console.log(n),t({response:n})})).catch((function(t){console.log(t),e({errorMessage:t})}))}))},DECLINE_FRIEND:function(t,n){return console.log("DECLINE_FRIEND invoke "+n),new Promise((function(t,e){var o="/api/friend/decline";y()({method:"post",url:o,data:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.jwtToken},async:!1}).then((function(n){console.log(n),t({response:n})})).catch((function(t){console.log(t),e({errorMessage:t})}))}))}},U={state:j,getters:L,mutations:V,actions:G},M={wallPosts:null},W={getWallPosts:function(t){return t.wallPosts}},J={setWallPosts:function(t,n){t.wallPosts=n}},z={GET_WALL:function(t,n){return new Promise((function(e,o){var s="/api/wallpost";y.a.get(s,{headers:{Authorization:"Bearer "+n}}).then((function(n){console.log(n),t.commit("setWallPosts",n.data),e({success:!0})})).catch((function(t){console.log(t),o({errorMessage:t})}))}))},WALL_POST_PUBLISH:function(t,n){return console.log("WALL_POST_PUBLISH invoke "+n),new Promise((function(t,e){var o="/api/wallpost";y()({method:"post",url:o,data:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.jwtToken},async:!1}).then((function(n){console.log(n),t({success:!0})})).catch((function(t){console.log(t),e({errorMessage:t})}))}))}},H={state:M,getters:W,mutations:J,actions:z};o["a"].use(_["a"]);var Q=new _["a"].Store({state:{},getters:{},mutations:{},actions:{},modules:{auth:T,layuot:R,account:$,friends:U,wall:H}}),q=Q,K={name:"Accounts",data:function(){return{userList:[],firstname:"",surname:""}},methods:{onSearchClick:function(){var t=this,n=this,e={firstname:n.firstname,surname:n.surname};console.log("onSearchClick invoke "),q.dispatch("SEARCH_ACCOUNTS",e).then((function(){console.log("SEARCH_ACCOUNTS success "),t.userList=t.$store.getters.getAccounts})).finally((function(){}))},onViewAccountInfo:function(t){console.log("onViewAccountInfo "+t),this.$store.getters.getAuthAccountId!==t?Ut.push({name:"AccountInfo",params:{accountId:t}}):Ut.push({path:"/"})}},created:function(){var t=this;console.log("Accounts component created "),q.dispatch("GET_ALL_ACCOUNTS",localStorage.jwtToken).then((function(){console.log("GET_ALL_ACCOUNTS success "),t.userList=t.$store.getters.getAccounts})).finally((function(){}))},components:{AccountRow:b}},X=K,Y=Object(v["a"])(X,d,m,!1,null,null,null),Z=Y.exports,tt=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("main",{staticClass:"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4",attrs:{role:"main"}},[t._m(0),e("div",[e("ul",{staticClass:"nav nav-tabs"},[e("li",{staticClass:"nav-item"},[e("router-link",{attrs:{to:"/friends/all"}},[e("a",{staticClass:"nav-link",class:{active:t.isAllActive},attrs:{href:"#"}},[t._v(" Все ")])])],1),e("li",{staticClass:"nav-item"},[e("router-link",{attrs:{to:"/friends/incoming"}},[e("a",{staticClass:"nav-link",class:{active:t.isIncomingActive},attrs:{href:"#"}},[t._v(" Входящие ")])])],1),e("li",{staticClass:"nav-item"},[e("router-link",{attrs:{to:"/friends/outgoing"}},[e("a",{staticClass:"nav-link",class:{active:t.isOutgoingActive},attrs:{href:"#"}},[t._v(" Исходящие ")])])],1)])]),t._l(t.userList,(function(n,o){return e("friend-row",{key:n.id,attrs:{item:n,index:o,"account-id":n.id,name:n.name,surname:n.surname},on:{onViewClick:function(n){return t.onViewAccountInfo(n)},onDeleteClick:function(n){return t.onDeleteFriend(n)},onCancelClick:function(n){return t.onCancelFriend(n)},onConfirmClick:function(n){return t.onConfirmFriend(n)},onDeclineClick:function(n){return t.onDeclineFriend(n)}}})}))],2)},nt=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},[e("h1",{staticClass:"h2"},[t._v("Друзья")])])}],et=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"shadow-sm p-3 mb-5 bg-white rounded"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-2 mb-3"},[t._v(" "+t._s(t.name)+" "+t._s(t.surname)+" ")]),e("div",{staticClass:"col-md-1 mb-3"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(n){return t.onViewClick()}}},[t._v(t._s(t.detailButtonCaption))])]),t.deleteButtonVisible?e("div",{staticClass:"col-md-1 mb-3"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(n){return t.onDeleteClick()}}},[t._v(t._s(t.deleteButtonCaption))])]):t._e(),t.cancelButtonVisible?e("div",{staticClass:"col-md-1 mb-3"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(n){return t.onCancelClick()}}},[t._v(t._s(t.cancelButtonCaption))])]):t._e(),t.confirmButtonVisible?e("div",{staticClass:"col-md-1 mb-3"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(n){return t.onConfirmClick()}}},[t._v(t._s(t.confirmButtonCaption))])]):t._e(),t.declineButtonVisible?e("div",{staticClass:"col-md-1 mb-3"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(n){return t.onDeclineClick()}}},[t._v(t._s(t.declineButtonCaption))])]):t._e()])])},ot=[],st={name:"FriendRow",props:["accountId","name","surname"],data:function(){return{detailButtonCaption:"Подробнее",deleteButtonCaption:"Удалить",deleteButtonVisible:!1,cancelButtonCaption:"Отменить заявку",cancelButtonVisible:!1,confirmButtonCaption:"Подтвердить",confirmButtonVisible:!1,declineButtonCaption:"Отказать",declineButtonVisible:!1,route:""}},methods:{onViewClick:function(t){this.$emit("onViewClick",this.accountId)},onDeleteClick:function(){this.$emit("onDeleteClick",this.accountId)},onCancelClick:function(){this.$emit("onCancelClick",this.accountId)},onConfirmClick:function(){this.$emit("onConfirmClick",this.accountId)},onDeclineClick:function(){this.$emit("onDeclineClick",this.accountId)},onRoute:function(t){this.route=t,this.deleteButtonVisible=!1,this.cancelButtonVisible=!1,this.confirmButtonVisible=!1,this.declineButtonVisible=!1,"all"===t?this.deleteButtonVisible=!0:"outgoing"===t?this.cancelButtonVisible=!0:"incoming"===t&&(this.confirmButtonVisible=!0,this.declineButtonVisible=!0)}},created:function(){console.log("FriendRow component created "+this.$route.params.type),this.onRoute(this.$route.params.type)},watch:{$route:function(t,n){console.log("FriendRow watch router "+t.params.type),this.onRoute(t.params.type)}}},it=st,at=Object(v["a"])(it,et,ot,!1,null,null,null),ct=at.exports,rt={name:"Friends",data:function(){return{userList:[],isAllActive:!1,isIncomingActive:!1,isOutgoingActive:!1,route:""}},methods:{onViewAccountInfo:function(t){console.log("onViewAccountInfo "+t),this.$store.getters.getAuthAccountId!==t?Ut.push({name:"AccountInfo",params:{accountId:t}}):Ut.push({path:"/"})},onDeleteFriend:function(t){var n=this;console.log("onDeleteFriend "+t);var e={friendId:t};q.dispatch("DELETE_FRIEND",e).then((function(t){console.log("onDeleteFriendClick success"),n.getAllFriends()})).finally((function(){}))},onCancelFriend:function(t){var n=this,e={friendId:t};q.dispatch("CANCEL_FRIEND",e).then((function(t){console.log("onCancelFriendClick success"),n.getOutgoingFriends()})).finally((function(){}))},onConfirmFriend:function(t){var n=this,e={friendId:t};q.dispatch("CONFIRM_FRIEND",e).then((function(t){console.log("onConfirmFriendClick success"),n.getIncomingFriends()})).finally((function(){}))},onDeclineFriend:function(t){var n=this,e={friendId:t};q.dispatch("DECLINE_FRIEND",e).then((function(t){console.log("onDeclineFriendClick success"),n.getIncomingFriends()})).finally((function(){}))},onRoute:function(t){this.route=t,this.isAllActive=!1,this.isIncomingActive=!1,this.isOutgoingActive=!1,"all"===t?(this.isAllActive=!0,this.getAllFriends()):"incoming"===t?(this.isIncomingActive=!0,this.getIncomingFriends()):"outgoing"===t&&(this.isOutgoingActive=!0,this.getOutgoingFriends())},getAllFriends:function(){var t=this;q.dispatch("GET_FRIENDS",localStorage.jwtToken).then((function(){console.log("GET_FRIENDS success "),t.userList=t.$store.getters.getFriends})).finally((function(){}))},getIncomingFriends:function(){var t=this;q.dispatch("GET_INCOMING_FRIEND_REQUESTS",localStorage.jwtToken).then((function(){console.log("GET_INCOMING_FRIEND_REQUESTS success "),t.userList=t.$store.getters.getFriends})).finally((function(){}))},getOutgoingFriends:function(){var t=this;q.dispatch("GET_OUTGOING_FRIEND_REQUESTS",localStorage.jwtToken).then((function(){console.log("GET_OUTGOING_FRIEND_REQUESTS success "),t.userList=t.$store.getters.getFriends})).finally((function(){}))}},created:function(){console.log("Friends component created "+this.$route.params.type),this.onRoute(this.$route.params.type)},watch:{$route:function(t,n){console.log("watch router "+t.params.type),this.onRoute(t.params.type)}},components:{FriendRow:ct}},lt=rt,ut=Object(v["a"])(lt,tt,nt,!1,null,null,null),dt=ut.exports,mt=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("main",{staticClass:"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4",attrs:{role:"main"}},[e("div",{staticClass:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},[e("h1",{staticClass:"h2"},[t._v(t._s(t.caption))])]),e("h4",{staticClass:"mb-3"},[t._v(t._s(t.name)+" "+t._s(t.surname))]),t._v(" Город: "+t._s(t.city)+" "),e("br"),t._v(" Возраст: "+t._s(t.age)+" "),e("br"),t._v(" Пол: "+t._s(t.gender)+" "),e("br"),e("hr"),t.myAccount?t._e():e("div",[t.addButtonVisible?e("div",{staticClass:"mb-3"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(n){return t.onAddFriendClick()}}},[t._v(t._s(t.addButtonCaption))])]):t._e(),t.deleteButtonVisible?e("div",{staticClass:"mb-3"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(n){return t.onDeleteFriendClick()}}},[t._v(t._s(t.deleteButtonCaption))])]):t._e(),t.cancelButtonVisible?e("div",{staticClass:"mb-3"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(n){return t.onCancelFriendClick()}}},[t._v(t._s(t.cancelButtonCaption))])]):t._e(),t.declineButtonVisible?e("div",{staticClass:"mb-3"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(n){return t.onDeclineFriendClick()}}},[t._v(t._s(t.declineButtonCaption)+" ")])]):t._e(),t.confirmButtonVisible?e("div",{staticClass:"mb-3"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(n){return t.onConfirmFriendClick()}}},[t._v(t._s(t.confirmButtonCaption)+" ")])]):t._e()])])},ft=[],pt=(e("b0c0"),{name:"AccountInfo",data:function(){return{addButtonCaption:"Добавить в друзья",addButtonVisible:!1,cancelButtonCaption:"Отменить заявку",cancelButtonVisible:!1,deleteButtonCaption:"Удалить из друзей",deleteButtonVisible:!1,confirmButtonCaption:"Подтвердить",confirmButtonVisible:!1,declineButtonCaption:"Отказать",declineButtonVisible:!1,myAccount:!0,caption:"",accountId:0,login:"",name:"",surname:"",gender:"",city:"",age:0}},methods:{updateAccountFields:function(){this.accountId=this.$store.getters.getAccounts.id,this.login=this.$store.getters.getAccounts.login,this.name=this.$store.getters.getAccounts.name,this.surname=this.$store.getters.getAccounts.surname,this.gender=this.$store.getters.getAccounts.gender,this.city=this.$store.getters.getAccounts.city,this.age=this.$store.getters.getAccounts.age},updateFriendButtonGroup:function(t){this.hideAllButton(),null!==t&&"NONE"!==t.status||(this.addButtonVisible=!0),"REQUEST"===t.status&&(this.$store.getters.getAuthAccountId===t.senderPersonId&&(this.cancelButtonVisible=!0),this.$store.getters.getAuthAccountId===t.receiverPersonId&&(this.confirmButtonVisible=!0,this.declineButtonVisible=!0)),"FRIEND"===t.status&&(this.deleteButtonVisible=!0)},hideAllButton:function(){this.addButtonVisible=!1,this.cancelButtonVisible=!1,this.deleteButtonVisible=!1,this.confirmButtonVisible=!1,this.declineButtonVisible=!1},loadAccountById:function(t){var n=this;q.dispatch("GET_ACCOUNT",t).then((function(){console.log("get account "+t+"success"),n.caption=n.$store.getters.getAccounts.name+" "+n.$store.getters.getAccounts.surname,n.myAccount=!1,n.updateAccountFields(),n.updateFriendButtonGroup(n.$store.getters.getAccounts.accountFriendStatus)})).finally((function(){}))},loadCurrentAccountInfo:function(){var t=this;q.dispatch("GET_CURRENT_ACCOUNT").then((function(){console.log("get my account success"),t.caption="Моя страница",t.myAccount=!0,t.updateAccountFields()})).finally((function(){}))},onAddFriendClick:function(){var t=this,n={friendId:this.accountId};q.dispatch("ADD_FRIEND",n).then((function(n){console.log("onAddFiendClick success"),t.updateFriendButtonGroup(n.response.data.accountFriend)})).finally((function(){}))},onDeleteFriendClick:function(){var t=this,n={friendId:this.accountId};q.dispatch("DELETE_FRIEND",n).then((function(n){console.log("onDeleteFriendClick success"),t.updateFriendButtonGroup(n.response.data.accountFriend)})).finally((function(){}))},onCancelFriendClick:function(){var t=this,n={friendId:this.accountId};q.dispatch("CANCEL_FRIEND",n).then((function(n){console.log("onCancelFriendClick success"),t.updateFriendButtonGroup(n.response.data.accountFriend)})).finally((function(){}))},onConfirmFriendClick:function(){var t=this,n={friendId:this.accountId};q.dispatch("CONFIRM_FRIEND",n).then((function(n){console.log("onConfirmFriendClick success"),t.updateFriendButtonGroup(n.response.data.accountFriend)})).finally((function(){}))},onDeclineFriendClick:function(){var t=this,n={friendId:this.accountId};q.dispatch("DECLINE_FRIEND",n).then((function(n){console.log("onDeclineFriendClick success"),t.updateFriendButtonGroup(n.response.data.accountFriend)})).finally((function(){}))}},watch:{$route:function(t,n){console.log("watch router "+t.params.accountId),console.log("watch router path "+t.path),"/"===t.path?(console.log("try load my account info"),this.loadCurrentAccountInfo()):(console.log("try load account info by account id "+t.params.accountId),this.loadAccountById(t.params.accountId))}},created:function(){console.log(" account info component created route path "+this.$route.path),console.log(" account info component created "+this.$route.params.accountId),"/"===this.$route.path?(console.log("try load my account info"),this.loadCurrentAccountInfo()):(console.log("try load account info by account id "+this.$route.params.accountId),this.loadAccountById(this.$route.params.accountId))}}),ht=pt,gt=Object(v["a"])(ht,mt,ft,!1,null,null,null),vt=gt.exports,Ct=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("main",{staticClass:"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4",attrs:{role:"main"}},[t._m(0),e("form",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4 mb-3"},[e("label",{attrs:{for:"wallPostText"}},[t._v("Текст")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.wallPostText,expression:"wallPostText"}],staticClass:"form-control",attrs:{type:"text",id:"wallPostText",placeholder:"",value:""},domProps:{value:t.wallPostText},on:{input:function(n){n.target.composing||(t.wallPostText=n.target.value)}}})]),e("div",{staticClass:"col-md-4 mb-3"},[e("br"),e("button",{staticClass:"btn btn-primary btn-lg btn-block",attrs:{type:"button"},on:{click:function(n){return t.onWallPostPublishClick()}}},[t._v(" Опубликовать ")])])])]),e("hr"),t._l(t.wallPosts,(function(t,n){return e("wall-post",{key:t.id,attrs:{item:t,index:n,fullUserName:t.fullUserName,dateCreated:t.dateCreated,text:t.text}})}))],2)},bt=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},[e("h1",{staticClass:"h2"},[t._v("Лента новостей")])])}],_t=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"shadow-sm p-3 mb-5 bg-white rounded"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-2 mb-3"},[t._v(" "+t._s(t.fullUserName)+" "),e("br"),t._v(" "+t._s(t.text)+" "),e("br"),t._v(" "+t._s(t.dateCreated)+" ")])])])},wt=[],yt={name:"WallPost",props:["fullUserName","dateCreated","text"],methods:{}},kt=yt,At=Object(v["a"])(kt,_t,wt,!1,null,null,null),Et=At.exports,It={name:"Wall",data:function(){return{wallPosts:[],wallPostText:""}},methods:{onWallPostPublishClick:function(){var t=this,n={text:t.wallPostText};console.log("onWallPostPublishClick invoke "),q.dispatch("WALL_POST_PUBLISH",n).then((function(){console.log("WALL_POST_PUBLISH success ")})).finally((function(){}))}},created:function(){var t=this;console.log("Wall component created "),q.dispatch("GET_WALL",localStorage.jwtToken).then((function(){console.log("GET_WALL success "),t.wallPosts=t.$store.getters.getWallPosts})).finally((function(){}))},components:{WallPost:Et}},Tt=It,Ft=Object(v["a"])(Tt,Ct,bt,!1,null,null,null),Nt=Ft.exports,Bt=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"text-center"},[e("form",{staticClass:"form-signin"},[e("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("Авторизация")]),e("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:"Email",required:"",autofocus:""},domProps:{value:t.login},on:{input:function(n){n.target.composing||(t.login=n.target.value)}}}),e("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"Password",required:""},domProps:{value:t.password},on:{input:function(n){n.target.composing||(t.password=n.target.value)}}}),e("button",{staticClass:"btn btn-lg btn-primary btn-block",on:{click:function(n){return t.onLoginClick()}}},[t._v("Войти")]),e("button",{staticClass:"btn btn-lg btn-primary btn-block",on:{click:function(n){return t.onRegisterClick()}}},[t._v("Регистрация")]),e("p",{staticClass:"mt-5 mb-3 text-muted"},[t._v("© 2020")])])])},xt=[],Rt={name:"LoginComponent",data:function(){return{login:"",password:""}},methods:{onLoginClick:function(){var t=this,n={name:t.login,password:t.password};q.dispatch("AUTH",n).then((function(){console.log("login success  "+t.$store.getters.getJwtToken),q.commit("setLayout","MainComponent"),Ut.push({path:"/"})})).finally((function(){}))},onRegisterClick:function(){q.commit("setLayout","EmptyComponent"),Ut.push({path:"/register"})}}},St=Rt,Pt=(e("cc47"),Object(v["a"])(St,Bt,xt,!1,null,null,null)),Ot=Pt.exports,Dt=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"container"},[e("div",{staticClass:"col-md-10 order-md-1"},[e("h4",{staticClass:"mb-3"},[t._v("Регистрация")]),e("hr",{staticClass:"mb-4"}),e("form",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6 mb-3"},[e("label",{attrs:{for:"firstName"}},[t._v("Имя")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",id:"firstName",placeholder:"",value:""},domProps:{value:t.name},on:{input:function(n){n.target.composing||(t.name=n.target.value)}}})]),e("div",{staticClass:"col-md-6 mb-3"},[e("label",{attrs:{for:"lastName"}},[t._v("Фамилия")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.surname,expression:"surname"}],staticClass:"form-control",attrs:{type:"text",id:"lastName",placeholder:"",value:""},domProps:{value:t.surname},on:{input:function(n){n.target.composing||(t.surname=n.target.value)}}})])]),e("div",{staticClass:"mb-3"},[e("label",{attrs:{for:"email"}},[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],staticClass:"form-control",attrs:{type:"text",id:"email",placeholder:""},domProps:{value:t.login},on:{input:function(n){n.target.composing||(t.login=n.target.value)}}})]),e("div",{staticClass:"mb-3"},[e("label",{attrs:{for:"pass"}},[t._v("Пароль")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"pass",placeholder:""},domProps:{value:t.password},on:{input:function(n){n.target.composing||(t.password=n.target.value)}}})]),e("div",{staticClass:"mb-3"},[e("label",{attrs:{for:"city"}},[t._v("Город")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.city,expression:"city"}],staticClass:"form-control",attrs:{type:"text",id:"city",placeholder:""},domProps:{value:t.city},on:{input:function(n){n.target.composing||(t.city=n.target.value)}}})]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-2 mb-3"},[e("div",{staticClass:"mb-1"},[e("label",{attrs:{for:"gender"}},[t._v("Пол")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.gender,expression:"gender"}],staticClass:"form-control",attrs:{type:"text",id:"gender",placeholder:""},domProps:{value:t.gender},on:{input:function(n){n.target.composing||(t.gender=n.target.value)}}})])]),e("div",{staticClass:"col-md-2 mb-3"},[e("div",{staticClass:"mb-3"},[e("label",{attrs:{for:"age"}},[t._v("Возраст")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.age,expression:"age"}],staticClass:"form-control",attrs:{type:"text",id:"age",placeholder:""},domProps:{value:t.age},on:{input:function(n){n.target.composing||(t.age=n.target.value)}}})])])]),e("hr",{staticClass:"mb-4"}),e("button",{staticClass:"btn btn-primary btn-lg btn-block",attrs:{type:"button"},on:{click:function(n){return t.onRegisterClick()}}},[t._v("Регистрация")])])])])},$t=[],jt={name:"RegisterComponent",data:function(){return{login:"",password:"",name:"",surname:"",city:"",gender:"",age:0}},methods:{onRegisterClick:function(){var t=this,n={login:t.login,password:t.password,name:t.name,surname:t.surname,city:t.city,gender:t.gender,age:t.age};q.dispatch("ACCOUNT_REGISTER",n).then((function(){console.log("register success  "+t.$store.getters.getJwtToken),q.commit("setLayout","MainComponent"),Ut.push({path:"/"})})).finally((function(){}))}}},Lt=jt,Vt=(e("5821"),Object(v["a"])(Lt,Dt,$t,!1,null,null,null)),Gt=Vt.exports;o["a"].use(u["a"]);var Ut=new u["a"]({mode:"history",base:"/",routes:[{path:"/",name:"MyAccountInfo",component:vt},{path:"/account/:accountId",name:"AccountInfo",component:vt,props:!0},{path:"/users",name:"Users",component:Z},{path:"/wall",name:"Wall",component:Nt},{path:"/friends/:type",name:"Friends",component:dt,props:!0},{path:"/login",name:"Login",component:Ot,meta:{layout:"empty"}},{path:"/register",name:"Register",component:Gt,meta:{layout:"empty"}}]}),Mt={name:"Header",methods:{onLogoutClick:function(){console.log("onLogoutClick"),localStorage.removeItem("jwtToken"),q.commit("setLayout","EmptyComponent"),Ut.push({path:"login"})}}},Wt=Mt,Jt=Object(v["a"])(Wt,r,l,!1,null,null,null),zt=Jt.exports,Ht=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("nav",{staticClass:"col-md-2 d-none d-md-block bg-light sidebar"},[e("div",{staticClass:"sidebar-sticky"},[e("ul",{staticClass:"nav flex-column"},[e("li",{staticClass:"nav-item"},[e("router-link",{attrs:{to:"/"}},[e("a",{staticClass:"nav-link active",attrs:{href:"#"}},[t._v(" Моя страница ")])])],1),e("li",{staticClass:"nav-item"},[e("router-link",{attrs:{to:"/users"}},[e("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v(" Пользователи ")])])],1),e("li",{staticClass:"nav-item"},[e("router-link",{attrs:{to:"/friends/all"}},[e("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v(" Друзья ")])])],1),e("li",{staticClass:"nav-item"},[e("router-link",{attrs:{to:"/wall"}},[e("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v(" Лента новостей ")])])],1)])])])},Qt=[],qt={name:"Sidebar",methods:{}},Kt=qt,Xt=Object(v["a"])(Kt,Ht,Qt,!1,null,null,null),Yt=Xt.exports,Zt={name:"MainComponent",components:{Header:zt,Sidebar:Yt}},tn=Zt,nn=(e("5870"),Object(v["a"])(tn,a,c,!1,null,null,null)),en=nn.exports,on=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[t._t("default")],2)},sn=[],an={},cn=Object(v["a"])(an,on,sn,!1,null,null,null),rn=cn.exports;o["a"].use(_["a"]);var ln={name:"App",router:Ut,store:q,components:{MainComponent:en,EmptyComponent:rn},data:function(){return{layuot:"",isAuth:!1}},created:function(){var t=this,n=this;this.$store.watch((function(t){return n.$store.getters.getLayout}),(function(n,e){t.layuot=n}),{deep:!0}),this.$store.watch((function(t){return n.$store.getters.getJwtToken}),(function(t,n){localStorage.jwtToken=t}),{deep:!0}),localStorage.jwtToken?(console.log("jwtToken exist, try refresh token"),q.dispatch("REFRESH_TOKEN",localStorage.jwtToken).then((function(){console.log("refresh token success  "+n.$store.getters.getJwtToken),q.commit("setLayout","MainComponent")})).catch((function(t){console.log("refresh token error"),q.commit("setLayout","EmptyComponent"),Ut.push({path:"login"})})).finally((function(){}))):(console.log("jwtToken not exist, try login"),q.commit("setLayout","EmptyComponent"),Ut.push({path:"login"}))}},un=ln,dn=Object(v["a"])(un,s,i,!1,null,null,null),mn=dn.exports;o["a"].config.productionTip=!1,new o["a"]({router:Ut,render:function(t){return t(mn)}}).$mount("#app")},5821:function(t,n,e){"use strict";var o=e("cd17"),s=e.n(o);s.a},5870:function(t,n,e){"use strict";var o=e("cfaa"),s=e.n(o);s.a},cc47:function(t,n,e){"use strict";var o=e("340f"),s=e.n(o);s.a},cd17:function(t,n,e){},cfaa:function(t,n,e){}});
//# sourceMappingURL=app.5bb7cb2a.js.map